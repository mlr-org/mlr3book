<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>6 Benchmarking | Introduction to mlr3</title>
  <meta name="description" content="6 Benchmarking | Introduction to mlr3" />
  <meta name="generator" content="bookdown  and GitBook 2.6.7" />

  <meta property="og:title" content="6 Benchmarking | Introduction to mlr3" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="6 Benchmarking | Introduction to mlr3" />
  
  
  

<meta name="author" content="The mlr-org Team" />


<meta name="date" content="2019-03-26" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="resampling.html">
<link rel="next" href="error-handling.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Prerequisites</a></li>
<li class="chapter" data-level="2" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>2</b> Introduction</a></li>
<li class="chapter" data-level="3" data-path="building-blocks.html"><a href="building-blocks.html"><i class="fa fa-check"></i><b>3</b> Building Blocks</a><ul>
<li class="chapter" data-level="3.1" data-path="building-blocks.html"><a href="building-blocks.html#tasks"><i class="fa fa-check"></i><b>3.1</b> Tasks</a><ul>
<li class="chapter" data-level="3.1.1" data-path="building-blocks.html"><a href="building-blocks.html#task-types"><i class="fa fa-check"></i><b>3.1.1</b> Task Types</a></li>
<li class="chapter" data-level="3.1.2" data-path="building-blocks.html"><a href="building-blocks.html#task-creation"><i class="fa fa-check"></i><b>3.1.2</b> Task Creation</a></li>
<li class="chapter" data-level="3.1.3" data-path="building-blocks.html"><a href="building-blocks.html#predefined-tasks"><i class="fa fa-check"></i><b>3.1.3</b> Predefined tasks</a></li>
<li class="chapter" data-level="3.1.4" data-path="building-blocks.html"><a href="building-blocks.html#task-api"><i class="fa fa-check"></i><b>3.1.4</b> Task API</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="building-blocks.html"><a href="building-blocks.html#learners"><i class="fa fa-check"></i><b>3.2</b> Learners</a><ul>
<li class="chapter" data-level="3.2.1" data-path="building-blocks.html"><a href="building-blocks.html#predefined-learners"><i class="fa fa-check"></i><b>3.2.1</b> Predefined Learners</a></li>
<li class="chapter" data-level="3.2.2" data-path="building-blocks.html"><a href="building-blocks.html#train-and-predict"><i class="fa fa-check"></i><b>3.2.2</b> Train and Predict</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="building-blocks.html"><a href="building-blocks.html#measures"><i class="fa fa-check"></i><b>3.3</b> Performance Measures</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="experiments.html"><a href="experiments.html"><i class="fa fa-check"></i><b>4</b> Experiments</a><ul>
<li class="chapter" data-level="4.1" data-path="experiments.html"><a href="experiments.html#task-and-learner-objects"><i class="fa fa-check"></i><b>4.1</b> Task and learner objects</a></li>
<li class="chapter" data-level="4.2" data-path="experiments.html"><a href="experiments.html#index-vector-for-traintest-splits"><i class="fa fa-check"></i><b>4.2</b> Index vector for train/test splits</a></li>
<li class="chapter" data-level="4.3" data-path="experiments.html"><a href="experiments.html#setting-up-an-experiment"><i class="fa fa-check"></i><b>4.3</b> Setting up an experiment</a></li>
<li class="chapter" data-level="4.4" data-path="experiments.html"><a href="experiments.html#training"><i class="fa fa-check"></i><b>4.4</b> Training</a></li>
<li class="chapter" data-level="4.5" data-path="experiments.html"><a href="experiments.html#predicting"><i class="fa fa-check"></i><b>4.5</b> Predicting</a><ul>
<li class="chapter" data-level="4.5.1" data-path="experiments.html"><a href="experiments.html#performance-assessment"><i class="fa fa-check"></i><b>4.5.1</b> Performance assessment</a></li>
<li class="chapter" data-level="4.5.2" data-path="experiments.html"><a href="experiments.html#chaining-methods"><i class="fa fa-check"></i><b>4.5.2</b> Chaining methods</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="resampling.html"><a href="resampling.html"><i class="fa fa-check"></i><b>5</b> Resampling</a><ul>
<li class="chapter" data-level="5.1" data-path="resampling.html"><a href="resampling.html#objects"><i class="fa fa-check"></i><b>5.1</b> Objects</a></li>
<li class="chapter" data-level="5.2" data-path="resampling.html"><a href="resampling.html#resampling-1"><i class="fa fa-check"></i><b>5.2</b> Resampling</a></li>
<li class="chapter" data-level="5.3" data-path="resampling.html"><a href="resampling.html#manual-instantiation"><i class="fa fa-check"></i><b>5.3</b> Manual instantiation</a></li>
<li class="chapter" data-level="5.4" data-path="resampling.html"><a href="resampling.html#custom-resampling"><i class="fa fa-check"></i><b>5.4</b> Custom resampling</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="benchmarking.html"><a href="benchmarking.html"><i class="fa fa-check"></i><b>6</b> Benchmarking</a><ul>
<li class="chapter" data-level="6.1" data-path="benchmarking.html"><a href="benchmarking.html#benchmarking-exhaustive-designs"><i class="fa fa-check"></i><b>6.1</b> Benchmarking Exhaustive Designs</a></li>
<li class="chapter" data-level="6.2" data-path="benchmarking.html"><a href="benchmarking.html#converting-specific-benchmark-objects-to-resample-objects"><i class="fa fa-check"></i><b>6.2</b> Converting specific benchmark objects to resample objects</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="error-handling.html"><a href="error-handling.html"><i class="fa fa-check"></i><b>7</b> Error Handling</a><ul>
<li class="chapter" data-level="7.1" data-path="error-handling.html"><a href="error-handling.html#setup"><i class="fa fa-check"></i><b>7.1</b> Setup</a></li>
<li class="chapter" data-level="7.2" data-path="error-handling.html"><a href="error-handling.html#no-error-handling"><i class="fa fa-check"></i><b>7.2</b> No error handling</a></li>
<li class="chapter" data-level="7.3" data-path="error-handling.html"><a href="error-handling.html#encapsulation"><i class="fa fa-check"></i><b>7.3</b> Encapsulation</a></li>
<li class="chapter" data-level="7.4" data-path="error-handling.html"><a href="error-handling.html#fallback-learners"><i class="fa fa-check"></i><b>7.4</b> Fallback learners</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="parallelization.html"><a href="parallelization.html"><i class="fa fa-check"></i><b>8</b> Parallelization</a><ul>
<li class="chapter" data-level="8.1" data-path="parallelization.html"><a href="parallelization.html#prerequisites-1"><i class="fa fa-check"></i><b>8.1</b> Prerequisites</a></li>
<li class="chapter" data-level="8.2" data-path="parallelization.html"><a href="parallelization.html#parallel-resampling"><i class="fa fa-check"></i><b>8.2</b> Parallel resampling</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction to mlr3</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="benchmarking" class="section level1">
<h1><span class="header-section-number">6</span> Benchmarking</h1>
<p>Comparing the performance of different learners on multiple tasks is a recurrent task.
<code>mlr3</code> offers the <code>benchmark()</code> function for convenience.</p>
<div id="benchmarking-exhaustive-designs" class="section level2">
<h2><span class="header-section-number">6.1</span> Benchmarking Exhaustive Designs</h2>
<p>The interface of the <code>benchmark()</code> function accepts a design of tasks, learners, and resampling strategies as data frame.</p>
<p>Here, we call <code>benchmark()</code> to perform a single holdout split on a single task and two learners:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(data.table)
design =<span class="st"> </span><span class="kw">data.table</span>(
  <span class="dt">task =</span> mlr_tasks<span class="op">$</span><span class="kw">mget</span>(<span class="st">&quot;iris&quot;</span>),
  <span class="dt">learner =</span> mlr_learners<span class="op">$</span><span class="kw">mget</span>(<span class="kw">c</span>(<span class="st">&quot;classif.rpart&quot;</span>, <span class="st">&quot;classif.featureless&quot;</span>)),
  <span class="dt">resampling =</span> mlr_resamplings<span class="op">$</span><span class="kw">mget</span>(<span class="st">&quot;holdout&quot;</span>)
)
<span class="kw">print</span>(design)</code></pre>
<pre><code>##             task                     learner          resampling
##           &lt;list&gt;                      &lt;list&gt;              &lt;list&gt;
## 1: &lt;TaskClassif&gt;       &lt;LearnerClassifRpart&gt; &lt;ResamplingHoldout&gt;
## 2: &lt;TaskClassif&gt; &lt;LearnerClassifFeatureless&gt; &lt;ResamplingHoldout&gt;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">bmr =<span class="st"> </span><span class="kw">benchmark</span>(design)</code></pre>
<pre><code>## INFO [mlr3] Benchmarking 2 experiments
## INFO [mlr3] Running learner &#39;classif.rpart&#39; on task &#39;iris&#39; (iteration 1/1)&#39;
## INFO [mlr3] Running learner &#39;classif.featureless&#39; on task &#39;iris&#39; (iteration 1/1)&#39;
## INFO [mlr3] Finished benchmark</code></pre>
<p>Note that the holdout splits have been automatically instantiated for each row of the design.
As a result, the <code>rpart</code> learner used a different training set than the featureless learner.
However, for comparison of learners you usually want the learners to see the same splits into train and test sets.
To overcome this issue, the resampling strategy needs to be manually instantiated before creating the design.</p>
<p>While the interface of <code>benchmark()</code> allows full flexibility, the creation of such design tables can be tedious.
Therefore, <code>mlr3</code> provides a helper function to quickly generate design tables and instantiate resampling strategies in an exhaustive grid fashion: <code>mlr3::expand_grid()</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># get some example tasks</span>
tasks =<span class="st"> </span>mlr_tasks<span class="op">$</span><span class="kw">mget</span>(<span class="kw">c</span>(<span class="st">&quot;pima&quot;</span>, <span class="st">&quot;sonar&quot;</span>, <span class="st">&quot;spam&quot;</span>))

<span class="co"># set measures for all tasks: accuracy (acc) and area under the curve (auc)</span>
measures =<span class="st"> </span>mlr_measures<span class="op">$</span><span class="kw">mget</span>(<span class="kw">c</span>(<span class="st">&quot;classif.acc&quot;</span>, <span class="st">&quot;classif.auc&quot;</span>))
tasks =<span class="st"> </span><span class="kw">lapply</span>(tasks, <span class="cf">function</span>(task) { task<span class="op">$</span>measures =<span class="st"> </span>measures; task })

<span class="co"># get a featureless learner and a classification tree</span>
learners =<span class="st"> </span>mlr_learners<span class="op">$</span><span class="kw">mget</span>(<span class="kw">c</span>(<span class="st">&quot;classif.featureless&quot;</span>, <span class="st">&quot;classif.rpart&quot;</span>))

<span class="co"># let the learners predict probabilities instead of class labels (required for AUC measure)</span>
learners<span class="op">$</span>classif.featureless<span class="op">$</span>predict_type =<span class="st"> &quot;prob&quot;</span>
learners<span class="op">$</span>classif.rpart<span class="op">$</span>predict_type =<span class="st"> &quot;prob&quot;</span>

<span class="co"># compare via 10-fold cross validation</span>
resamplings =<span class="st"> </span>mlr_resamplings<span class="op">$</span><span class="kw">mget</span>(<span class="st">&quot;cv&quot;</span>)

<span class="co"># create a BenchmarkResult object</span>
design =<span class="st"> </span><span class="kw">expand_grid</span>(tasks, learners, resamplings)
<span class="kw">print</span>(design)</code></pre>
<pre><code>##             task                     learner     resampling
##           &lt;list&gt;                      &lt;list&gt;         &lt;list&gt;
## 1: &lt;TaskClassif&gt; &lt;LearnerClassifFeatureless&gt; &lt;ResamplingCV&gt;
## 2: &lt;TaskClassif&gt;       &lt;LearnerClassifRpart&gt; &lt;ResamplingCV&gt;
## 3: &lt;TaskClassif&gt; &lt;LearnerClassifFeatureless&gt; &lt;ResamplingCV&gt;
## 4: &lt;TaskClassif&gt;       &lt;LearnerClassifRpart&gt; &lt;ResamplingCV&gt;
## 5: &lt;TaskClassif&gt; &lt;LearnerClassifFeatureless&gt; &lt;ResamplingCV&gt;
## 6: &lt;TaskClassif&gt;       &lt;LearnerClassifRpart&gt; &lt;ResamplingCV&gt;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">bmr =<span class="st"> </span><span class="kw">benchmark</span>(design)</code></pre>
<pre><code>## INFO [mlr3] Benchmarking 60 experiments
## INFO [mlr3] Running learner &#39;classif.featureless&#39; on task &#39;pima&#39; (iteration 1/10)&#39;
## INFO [mlr3] Running learner &#39;classif.featureless&#39; on task &#39;pima&#39; (iteration 2/10)&#39;
## INFO [mlr3] Running learner &#39;classif.featureless&#39; on task &#39;pima&#39; (iteration 3/10)&#39;
## INFO [mlr3] Running learner &#39;classif.featureless&#39; on task &#39;pima&#39; (iteration 4/10)&#39;
## INFO [mlr3] Running learner &#39;classif.featureless&#39; on task &#39;pima&#39; (iteration 5/10)&#39;
## INFO [mlr3] Running learner &#39;classif.featureless&#39; on task &#39;pima&#39; (iteration 6/10)&#39;
## INFO [mlr3] Running learner &#39;classif.featureless&#39; on task &#39;pima&#39; (iteration 7/10)&#39;
## INFO [mlr3] Running learner &#39;classif.featureless&#39; on task &#39;pima&#39; (iteration 8/10)&#39;
## INFO [mlr3] Running learner &#39;classif.featureless&#39; on task &#39;pima&#39; (iteration 9/10)&#39;
## INFO [mlr3] Running learner &#39;classif.featureless&#39; on task &#39;pima&#39; (iteration 10/10)&#39;
## INFO [mlr3] Running learner &#39;classif.rpart&#39; on task &#39;pima&#39; (iteration 1/10)&#39;
## INFO [mlr3] Running learner &#39;classif.rpart&#39; on task &#39;pima&#39; (iteration 2/10)&#39;
## INFO [mlr3] Running learner &#39;classif.rpart&#39; on task &#39;pima&#39; (iteration 3/10)&#39;
## INFO [mlr3] Running learner &#39;classif.rpart&#39; on task &#39;pima&#39; (iteration 4/10)&#39;
## INFO [mlr3] Running learner &#39;classif.rpart&#39; on task &#39;pima&#39; (iteration 5/10)&#39;
## INFO [mlr3] Running learner &#39;classif.rpart&#39; on task &#39;pima&#39; (iteration 6/10)&#39;
## INFO [mlr3] Running learner &#39;classif.rpart&#39; on task &#39;pima&#39; (iteration 7/10)&#39;
## INFO [mlr3] Running learner &#39;classif.rpart&#39; on task &#39;pima&#39; (iteration 8/10)&#39;
## INFO [mlr3] Running learner &#39;classif.rpart&#39; on task &#39;pima&#39; (iteration 9/10)&#39;
## INFO [mlr3] Running learner &#39;classif.rpart&#39; on task &#39;pima&#39; (iteration 10/10)&#39;
## INFO [mlr3] Running learner &#39;classif.featureless&#39; on task &#39;sonar&#39; (iteration 1/10)&#39;
## INFO [mlr3] Running learner &#39;classif.featureless&#39; on task &#39;sonar&#39; (iteration 2/10)&#39;
## INFO [mlr3] Running learner &#39;classif.featureless&#39; on task &#39;sonar&#39; (iteration 3/10)&#39;
## INFO [mlr3] Running learner &#39;classif.featureless&#39; on task &#39;sonar&#39; (iteration 4/10)&#39;
## INFO [mlr3] Running learner &#39;classif.featureless&#39; on task &#39;sonar&#39; (iteration 5/10)&#39;
## INFO [mlr3] Running learner &#39;classif.featureless&#39; on task &#39;sonar&#39; (iteration 6/10)&#39;
## INFO [mlr3] Running learner &#39;classif.featureless&#39; on task &#39;sonar&#39; (iteration 7/10)&#39;
## INFO [mlr3] Running learner &#39;classif.featureless&#39; on task &#39;sonar&#39; (iteration 8/10)&#39;
## INFO [mlr3] Running learner &#39;classif.featureless&#39; on task &#39;sonar&#39; (iteration 9/10)&#39;
## INFO [mlr3] Running learner &#39;classif.featureless&#39; on task &#39;sonar&#39; (iteration 10/10)&#39;
## INFO [mlr3] Running learner &#39;classif.rpart&#39; on task &#39;sonar&#39; (iteration 1/10)&#39;
## INFO [mlr3] Running learner &#39;classif.rpart&#39; on task &#39;sonar&#39; (iteration 2/10)&#39;
## INFO [mlr3] Running learner &#39;classif.rpart&#39; on task &#39;sonar&#39; (iteration 3/10)&#39;
## INFO [mlr3] Running learner &#39;classif.rpart&#39; on task &#39;sonar&#39; (iteration 4/10)&#39;
## INFO [mlr3] Running learner &#39;classif.rpart&#39; on task &#39;sonar&#39; (iteration 5/10)&#39;
## INFO [mlr3] Running learner &#39;classif.rpart&#39; on task &#39;sonar&#39; (iteration 6/10)&#39;
## INFO [mlr3] Running learner &#39;classif.rpart&#39; on task &#39;sonar&#39; (iteration 7/10)&#39;
## INFO [mlr3] Running learner &#39;classif.rpart&#39; on task &#39;sonar&#39; (iteration 8/10)&#39;
## INFO [mlr3] Running learner &#39;classif.rpart&#39; on task &#39;sonar&#39; (iteration 9/10)&#39;
## INFO [mlr3] Running learner &#39;classif.rpart&#39; on task &#39;sonar&#39; (iteration 10/10)&#39;
## INFO [mlr3] Running learner &#39;classif.featureless&#39; on task &#39;spam&#39; (iteration 1/10)&#39;
## INFO [mlr3] Running learner &#39;classif.featureless&#39; on task &#39;spam&#39; (iteration 2/10)&#39;
## INFO [mlr3] Running learner &#39;classif.featureless&#39; on task &#39;spam&#39; (iteration 3/10)&#39;
## INFO [mlr3] Running learner &#39;classif.featureless&#39; on task &#39;spam&#39; (iteration 4/10)&#39;
## INFO [mlr3] Running learner &#39;classif.featureless&#39; on task &#39;spam&#39; (iteration 5/10)&#39;
## INFO [mlr3] Running learner &#39;classif.featureless&#39; on task &#39;spam&#39; (iteration 6/10)&#39;
## INFO [mlr3] Running learner &#39;classif.featureless&#39; on task &#39;spam&#39; (iteration 7/10)&#39;
## INFO [mlr3] Running learner &#39;classif.featureless&#39; on task &#39;spam&#39; (iteration 8/10)&#39;
## INFO [mlr3] Running learner &#39;classif.featureless&#39; on task &#39;spam&#39; (iteration 9/10)&#39;
## INFO [mlr3] Running learner &#39;classif.featureless&#39; on task &#39;spam&#39; (iteration 10/10)&#39;
## INFO [mlr3] Running learner &#39;classif.rpart&#39; on task &#39;spam&#39; (iteration 1/10)&#39;
## INFO [mlr3] Running learner &#39;classif.rpart&#39; on task &#39;spam&#39; (iteration 2/10)&#39;
## INFO [mlr3] Running learner &#39;classif.rpart&#39; on task &#39;spam&#39; (iteration 3/10)&#39;
## INFO [mlr3] Running learner &#39;classif.rpart&#39; on task &#39;spam&#39; (iteration 4/10)&#39;
## INFO [mlr3] Running learner &#39;classif.rpart&#39; on task &#39;spam&#39; (iteration 5/10)&#39;
## INFO [mlr3] Running learner &#39;classif.rpart&#39; on task &#39;spam&#39; (iteration 6/10)&#39;
## INFO [mlr3] Running learner &#39;classif.rpart&#39; on task &#39;spam&#39; (iteration 7/10)&#39;
## INFO [mlr3] Running learner &#39;classif.rpart&#39; on task &#39;spam&#39; (iteration 8/10)&#39;
## INFO [mlr3] Running learner &#39;classif.rpart&#39; on task &#39;spam&#39; (iteration 9/10)&#39;
## INFO [mlr3] Running learner &#39;classif.rpart&#39; on task &#39;spam&#39; (iteration 10/10)&#39;
## INFO [mlr3] Finished benchmark</code></pre>
<p>The aggregated resampling results can be accessed with:</p>
<pre class="sourceCode r"><code class="sourceCode r">bmr<span class="op">$</span><span class="kw">aggregated</span>(<span class="dt">objects =</span> <span class="ot">FALSE</span>)</code></pre>
<pre><code>##                hash resampling_id task_id          learner_id classif.acc
##              &lt;char&gt;        &lt;char&gt;  &lt;char&gt;              &lt;char&gt;       &lt;num&gt;
## 1: 1e3eb108a446374e            cv    pima classif.featureless   0.6510595
## 2: 5ae8471eb7bb652e            cv    pima       classif.rpart   0.7292720
## 3: cad240cbb4972cfc            cv   sonar classif.featureless   0.5347619
## 4: 49f621b8a939a24c            cv   sonar       classif.rpart   0.6588095
## 5: 2aa437caaf56cff2            cv    spam classif.featureless   0.6059507
## 6: f82cce814d1a76cf            cv    spam       classif.rpart   0.8908889
##    classif.auc
##          &lt;num&gt;
## 1:   0.5000000
## 2:   0.7745317
## 3:   0.5000000
## 4:   0.7221811
## 5:   0.5000000
## 6:   0.8885971</code></pre>
<p>We can aggregate it further, i.e.Â if we are interested which learner performed best over all tasks:</p>
<pre class="sourceCode r"><code class="sourceCode r">bmr<span class="op">$</span><span class="kw">aggregated</span>(<span class="dt">objects =</span> <span class="ot">FALSE</span>)[, <span class="kw">list</span>(<span class="dt">acc =</span> <span class="kw">mean</span>(classif.acc), <span class="dt">auc =</span> <span class="kw">mean</span>(classif.auc)), by =<span class="st"> &quot;learner_id&quot;</span>]</code></pre>
<pre><code>##             learner_id       acc       auc
##                 &lt;char&gt;     &lt;num&gt;     &lt;num&gt;
## 1: classif.featureless 0.5972573 0.5000000
## 2:       classif.rpart 0.7596568 0.7951033</code></pre>
<p>Unsurprisingly, the classification tree outperformed the featureless learner.</p>
</div>
<div id="converting-specific-benchmark-objects-to-resample-objects" class="section level2">
<h2><span class="header-section-number">6.2</span> Converting specific benchmark objects to resample objects</h2>
<p>As a <code>BenchmarkResult</code> object is basically a collection of multiple <code>ResampleResult</code> objects, we can extract specific <code>ResampleResult</code> objects using the stored hashes:</p>
<pre class="sourceCode r"><code class="sourceCode r">tab =<span class="st"> </span>bmr<span class="op">$</span><span class="kw">aggregated</span>(<span class="dt">objects =</span> <span class="ot">FALSE</span>)[task_id <span class="op">==</span><span class="st"> &quot;spam&quot;</span> <span class="op">&amp;</span><span class="st"> </span>learner_id <span class="op">==</span><span class="st"> &quot;classif.rpart&quot;</span>]
<span class="kw">print</span>(tab)</code></pre>
<pre><code>##                hash resampling_id task_id    learner_id classif.acc
##              &lt;char&gt;        &lt;char&gt;  &lt;char&gt;        &lt;char&gt;       &lt;num&gt;
## 1: f82cce814d1a76cf            cv    spam classif.rpart   0.8908889
##    classif.auc
##          &lt;num&gt;
## 1:   0.8885971</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">rr =<span class="st"> </span>bmr<span class="op">$</span><span class="kw">resample_result</span>(tab<span class="op">$</span>hash)
<span class="kw">print</span>(rr)</code></pre>
<pre><code>## &lt;ResampleResult&gt; of learner &#39;spam&#39; on task &#39;classif.rpart&#39; with 10 iterations
##      Measure   Min. 1st Qu. Median   Mean 3rd Qu.   Max.      Sd
##  classif.acc 0.8696  0.8832 0.8913 0.8909  0.9000 0.9111 0.01266
##  classif.auc 0.8664  0.8811 0.8893 0.8886  0.8998 0.9041 0.01298</code></pre>
<p>We can now investigate this resampling and even single experiments using the previously introduced API:</p>
<pre class="sourceCode r"><code class="sourceCode r">rr<span class="op">$</span>aggregated</code></pre>
<pre><code>## classif.acc classif.auc 
##   0.8908889   0.8885971</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># get the iteration with worst AUC</span>
worst =<span class="st"> </span><span class="kw">as.data.table</span>(rr)[<span class="kw">which.min</span>(classif.auc), <span class="kw">c</span>(<span class="st">&quot;iteration&quot;</span>, <span class="st">&quot;classif.auc&quot;</span>)]
<span class="kw">print</span>(worst)</code></pre>
<pre><code>##    iteration classif.auc
##        &lt;int&gt;       &lt;num&gt;
## 1:         3   0.8664496</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co"># get the corresponding experiment</span>
e =<span class="st"> </span>rr<span class="op">$</span><span class="kw">experiment</span>(worst<span class="op">$</span>iteration)
<span class="kw">print</span>(e)</code></pre>
<pre><code>## &lt;Experiment&gt; [scored]:
##  + Task: spam
##  + Learner: classif.rpart
##  + Model: [rpart]
##  + Predictions: [PredictionClassif]
##  + Performance: classif.acc=0.8695652, classif.auc=0.8664496
## 
## Public: clone(), ctrl, data, has_errors, hash, learner, log(),
##   model, performance, predict(), prediction, score(), seeds,
##   state, task, test_set, timings, train_set, train(),
##   validation_set</code></pre>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="resampling.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="error-handling.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": ["mlr3book.pdf", "mlr3book.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
