## Progress Bars {#progress}

Progress bars are supported for benchmarking, tuning and feature selection via the package `r cran_pkg("progressr")`. 
The package gives the user full control of how and when progress is presented.

We deactivate logging messages so that only the progress bar are visible.

```{r}
lgr::get_logger("mlr3")$set_threshold("warn")
lgr::get_logger("bbotk")$set_threshold("warn")
```

We activate a progress handler with the `r ref("progressr::handlers()")` function.
The progress handler states how progress is presented.
We recommend the `"progress"` handler which is provided by the package `r cran_pkg("progress")`.

```{r}
progressr::handlers("progress")
```

Finally, we wrap the `r ref("resample()")` function  with `r ref("progressr::with_progress()")` to run the resample experiment with a progress bar.

```{r}
library(mlr3verse)

task = tsk("pima")
learner = lrn("classif.rpart")
resampling = rsmp("repeated_cv", folds = 3, repeats = 100)

progressr::with_progress({resample(task, learner, resampling)})
```

Alternatively, we can activate progress bars globally.

```{r}
progressr::handlers(global = TRUE)

design = benchmark_grid(tsks(c("pima", "iris")), learner, resampling)
benchmark(design)
```


The packages `r mlr_pkg("mlr3tuning")` and `r mlr_pkg("mlr3fselect")` support progress bars.
We display the tuning progress with a progress bar.

```{r}
progressr::handlers("progress")

progressr::with_progress({
  tune(
    method = "random_search",
    task = tsk("pima"),
    learner = lrn("classif.rpart", cp = to_tune(1e-04, 1e-1, logscale = TRUE)),
    resampling = rsmp("cv", folds = 3),
    measure = msr("classif.ce"),
    term_evals = 100,
    batch_size = 10)
})
```

Progress is supported by `r ref("TerminatorClockTime")`, `r ref("TerminatorEvals")` and `r ref("TerminatorRunTime")` and combinations of terminators with `r ref("TerminatorCombo")`.

